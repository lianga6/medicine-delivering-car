# 送药小车
## 背景
这是我和我的小团队在2023年准备电赛控制类做的第一个项目，历时一个多月，用的stm32单片机，视觉用的openmv，因为是第一个项目，所以以现在的我来看这个项目的代码，还是多有欠缺，但还是有很多代码及思路值得学习。如果想看完善版，可以去看我们三人团队的MSp432的控制类模板，虽然单片机不同，但其实很好移植，很多重要的代码几乎可以直接把文件复制过来稍微改一下就能用。

## 演示
[观看视频](https://github.com/lianga6/medicine_car1/blob/main/car.mp4 "点我观看演示视频")







## 日志
- 在1.0版本中
添加了32接收openmv数据的功能
openmv实现了pid巡线和分岔口识别功能
打开了编码器功能
为oled开启了I2C


- 在2.0版本中
各种标志位
openmv发送的标志位和信息有：
	Num//找到的数字
	LOR//控制转向 0直行 1左转 2右转 
stm32自己的标志位：
	Task_flag//执行的任务标志

sensor发送的标志位：
	Gohome_flag=0;//带上药物0 取下药物1
	Stop_flag//到灰度传感器 到达分岔口停下识别数字
 Stop_flag:用于openmv切换模式，当置1时，滴答定时器开始转向计时，一段时间后清0
 spinback_flag：背身掉头标志位置1开始转向   

- 2.0
在这一版中，还缺少关于药房停车的判断
- 3.0
且大多数东西都已经封装成函数
- 4.0中
增加了两个openmv的收发  完善了位置环  大概完成了转向的写法（也许？笑）
- 4.1.0中
完善了部分4.0中缺失功能和bug

- 4.1.1中
没有更新，在while1中添加了非位置环的位置控制

- 4.2.0中
送药的任务基本完成  缺少回家

- 在4.2.1中
完成回家   openmv巡线和找路口测试通过
- 4.2.2中·
num数字传送成功  但openmv收不到任务标志
- 4.2.3
所有标志位成功接收
- 4.2.4
打算置一个回家标志位，然后将回家行为和送药行为分开
- 4.2.5
将回家更新了，老版回家在该版本中保留，下一版本将删除
- 4.2.6
回家任务完成
